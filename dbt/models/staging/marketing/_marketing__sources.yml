version: 2
sources:
  - name: bronze_marketing
    database: "{{ env_var('DBT_BRONZE_DB', 'BRONZE') }}"
    schema: MARKETING
    config:
      loaded_at_field: _FIVETRAN_SYNCED
      freshness:
        warn_after: {count: 96, period: hour}
        error_after: {count: 120, period: hour}
    tables:
      - name: MARKETING_CAMPAIGNS
        description: "Campaign master with spend and acquisition metrics."
        meta:
          fivetran_connector: "myntra_clv_marketing_connector"
          load_type: "FULL"
        columns:
          - name: CAMPAIGN_ID
            description: "Unique campaign ID"
          - name: CAMPAIGN_NAME
            description: "Campaign name"
          - name: TOTAL_SPEND
            description: "Total spend"
          - name: CUSTOMERS_ACQUIRED
            description: "Customers acquired"
          - name: _FIVETRAN_SYNCED
            description: "Fivetran sync timestamp"
          - name: _FIVETRAN_DELETED
            description: "Fivetran soft delete flag"